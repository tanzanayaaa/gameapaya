<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tic Tac Toe - AI</title>
<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: radial-gradient(circle, #2b0066, #000);
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        color: #fff;
        user-select: none;
    }
    .container {
        text-align: center;
        width: 90vw;
        max-width: 500px;
    }
    h1 {
        font-size: 6vw;
        max-font-size: 32px;
        color: #7d5bff;
        text-shadow: 0 0 10px #a580ff;
    }
    #board {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        margin: 20px auto;
        width: 80vw;
        max-width: 350px;
    }
    .cell {
        width: 100%;
        aspect-ratio: 1;
        background: rgba(101, 31, 255, 0.3);
        border-radius: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 10vw;
        max-font-size: 64px;
        cursor: pointer;
        transition: 0.3s;
        box-shadow: 0 0 10px #472aff;
    }
    .cell:hover {
        background: rgba(131, 61, 255, 0.6);
    }
    .disabled { pointer-events: none; }
    .highlight {
        background: #9f3bff !important;
        box-shadow: 0 0 20px #d09cff;
    }
    #message {
        font-size: 22px;
        margin: 15px 0;
        opacity: 0;
        transition: opacity 0.6s;
    }
    #resetBtn {
        display: none;
        padding: 10px 20px;
        background: #7d5bff;
        border: none;
        color: #fff;
        border-radius: 8px;
        font-size: 18px;
        cursor: pointer;
        margin-top: 10px;
        box-shadow: 0 0 15px #a580ff;
    }
    #soundBtn {
        position: fixed;
        top: 10px;
        right: 10px;
        background: transparent;
        border: none;
        font-size: 30px;
        cursor: pointer;
        color: #fff;
        text-shadow: 0 0 10px #a580ff;
    }
</style>
</head>
<body><button id="soundBtn">ðŸ”Š</button>

<div class="container">
    <h1>ðŸŽ¯ Tic Tac Toe - Lawan Komputer</h1><div id="message"></div>
<div id="board"></div>
<button id="resetBtn">Main Lagi</button>

</div><audio id="clickSound" src="https://www.soundjay.com/buttons/sounds/button-16.mp3"></audio> <audio id="winSound" src="https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3"></audio> <audio id="bgMusic" src="https://www.bensound.com/bensound-music/bensound-sunny.mp3" loop autoplay></audio>

<script>
const board = document.getElementById("board");
const message = document.getElementById("message");
const resetBtn = document.getElementById("resetBtn");
const soundBtn = document.getElementById("soundBtn");
const clickSound = document.getElementById("clickSound");
const winSound = document.getElementById("winSound");
const bgMusic = document.getElementById("bgMusic");

let cells = [];
let currentPlayer = "X";
let gameActive = true;
let boardState = Array(9).fill(null);

function createBoard() {
    board.innerHTML = "";
    boardState = Array(9).fill(null);
    gameActive = true;
    message.style.opacity = 0;
    resetBtn.style.display = "none";

    for (let i = 0; i < 9; i++) {
        const cell = document.createElement("div");
        cell.classList.add("cell");
        cell.dataset.index = i;
        cell.addEventListener("click", handlePlayerMove);
        board.appendChild(cell);
        cells[i] = cell;
    }
}

function handlePlayerMove(e) {
    if (!gameActive) return;

    const index = e.target.dataset.index;
    if (boardState[index]) return;

    clickSound.play();
    makeMove(index, "X");

    if (!checkResult()) {
        setTimeout(() => aiMove(), 400);
    }
}

function makeMove(index, player) {
    boardState[index] = player;
    cells[index].textContent = player;
}

function aiMove() {
    if (!gameActive) return;

    const emptyCells = boardState.map((v, i) => v === null ? i : null).filter(v => v !== null);
    const randomIndex = emptyCells[Math.floor(Math.random() * emptyCells.length)];

    makeMove(randomIndex, "O");
    checkResult();
}

const winPatterns = [
    [0,1,2],[3,4,5],[6,7,8], // rows
    [0,3,6],[1,4,7],[2,5,8], // cols
    [0,4,8],[2,4,6]          // diagonals
];

function checkResult() {
    let winner = null;

    winPatterns.forEach(pattern => {
        const [a,b,c] = pattern;
        if (boardState[a] && boardState[a] === boardState[b] && boardState[a] === boardState[c]) {
            winner = boardState[a];
            pattern.forEach(i => cells[i].classList.add("highlight"));
        }
    });

    if (winner) {
        endGame(winner === "X" ? "Kamu Menang!" : "Komputer Menang!");
        winSound.play();
        return true;
    }

    if (!boardState.includes(null)) {
        endGame("Seri!");
        return true;
    }
    return false;
}

function endGame(text) {
    gameActive = false;
    message.textContent = text;
    message.style.opacity = 1;
    resetBtn.style.display = "block";
    board.classList.add("disabled");
}

resetBtn.addEventListener("click", () => {
    board.classList.remove("disabled");
    createBoard();
});

soundBtn.addEventListener("click", () => {
    if (bgMusic.paused) {
        bgMusic.play();
        soundBtn.textContent = "ðŸ”Š";
    } else {
        bgMusic.pause();
        soundBtn.textContent = "ðŸ”‡";
    }
});

createBoard();
</script></body>
  </html>
